<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ø§Ù„Ø´Ø¨ÙƒØ§Øª ÙˆØ¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¶Ø±Ø¨ (Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù„Ø«)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;800&display=swap');
    *{font-family:"Tajawal",system-ui,sans-serif}
    .card{box-shadow:0 18px 60px rgba(15,23,42,.12)}
    .btn{border-radius:18px;font-weight:800;padding:14px 18px}
    .pill{border-radius:999px;padding:6px 12px;font-weight:800;font-size:13px}
    .shake{animation:shake .35s ease-in-out}
    @keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(6px)}50%{transform:translateX(-6px)}75%{transform:translateX(4px)}}
    .pop{animation:pop .35s ease-in-out}
    @keyframes pop{0%{transform:scale(.98)}60%{transform:scale(1.04)}100%{transform:scale(1)}}

    .gridWrap{display:grid;gap:10px;padding:18px;border-radius:24px;background:linear-gradient(180deg, rgba(255,255,255,.95), rgba(255,255,255,.75));border:2px solid rgba(236,72,153,.20);box-shadow:0 10px 30px rgba(0,0,0,.06)}
    .dot{width:34px;height:34px;border-radius:999px;background:radial-gradient(circle at 30% 30%, rgba(253,230,138,1), rgba(245,158,11,1));border:2px solid rgba(0,0,0,.08);box-shadow:0 6px 14px rgba(0,0,0,.10)}
    .miniDot{width:18px;height:18px;border-radius:999px;border:1.5px solid rgba(0,0,0,.10);background:radial-gradient(circle at 30% 30%, rgba(253,230,138,1), rgba(245,158,11,1))}
    .miniGrid{display:grid;gap:6px;padding:12px;border-radius:18px;background:#fff;border:1.5px solid rgba(148,163,184,.35)}

    .eqBox{min-width:74px;height:56px;display:flex;align-items:center;justify-content:center;border-width:4px;border-radius:18px;font-size:26px;font-weight:900;background:#fff}
    .numInput{width:84px;height:56px;text-align:center;font-size:26px;font-weight:900;border-width:4px;border-radius:18px;outline:none;background:#fff}
    .numInput:focus{box-shadow:0 0 0 6px rgba(236,72,153,.18)}
    @media(max-width:640px){.dot{width:30px;height:30px}.gridWrap{gap:8px;padding:14px}.numInput{width:72px}.eqBox{min-width:66px}}
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-emerald-50 via-white to-pink-50">
  <div class="max-w-6xl mx-auto px-4 py-6">
    <div class="bg-white/90 backdrop-blur rounded-3xl card p-6 border border-emerald-100">
      <div class="text-center">
        <div class="text-2xl md:text-3xl font-extrabold text-slate-800">Ø§Ù„Ø´Ù‘ÙØ¨ÙÙƒÙØ§ØªÙ ÙˆÙØ¹ÙÙ…ÙÙ„ÙÙŠÙ‘ÙØ©Ù Ø§Ù„Ø¶Ù‘ÙØ±Ù’Ø¨</div>
        <div class="mt-3 grid md:grid-cols-2 gap-3 w-full max-w-4xl mx-auto">
          <div class="rounded-2xl border border-emerald-200 bg-emerald-50 px-4 py-3">
            <div class="font-extrabold text-emerald-800">ÙÙÙƒÙ’Ø±ÙØ©Ù Ø§Ù„Ø¯Ù‘ÙØ±Ù’Ø³Ù</div>
            <div class="text-slate-700 font-bold mt-1">Ø£Ø³ØªØ¹Ù…Ù„Ù Ø§Ù„Ø´Ø¨ÙƒØ§ØªÙ Ù„Ø£Ø¬Ø¯Ù Ù†Ø§ØªØ¬Ù Ø§Ù„Ø¶Ø±Ø¨.</div>
          </div>
          <div class="rounded-2xl border border-amber-200 bg-amber-50 px-4 py-3">
            <div class="font-extrabold text-amber-800">Ø§Ù„Ù…ÙÙÙ’Ø±ÙØ¯ÙØ§Øª</div>
            <div class="text-slate-700 font-bold mt-1">Ø§Ù„Ø´Ù‘ÙØ¨ÙÙƒÙØ© â€¢ Ø§Ù„Ø¹ÙÙˆÙØ§Ù…ÙÙ„ â€¢ Ù†Ø§ØªÙØ¬Ù Ø§Ù„Ø¶Ù‘ÙØ±Ù’Ø¨ â€¢ Ø®ÙØ§ØµÙ‘ÙÙŠÙ‘ÙØ©Ù Ø§Ù„Ø¥ÙØ¨Ù’Ø¯ÙØ§Ù„</div>
          </div>
        </div>
        <div class="mt-2 text-slate-600 leading-7">
          Ø§Ù„Ø´Ø¨ÙƒØ© = ØµÙÙˆÙ Ù…ØªØ³Ø§ÙˆÙŠØ© ÙˆØ£Ø¹Ù…Ø¯Ø© Ù…ØªØ³Ø§ÙˆÙŠØ©. Ø¹Ø¯Ø¯ Ø§Ù„ØµÙÙˆÙ ÙˆØ¹ÙØ¯ÙØ¯ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ù‡Ù…Ø§ <b>Ø¹Ø§Ù…Ù„Ø§Ù†</b>ØŒ ÙˆØ¹Ø¯Ø¯ Ø§Ù„Ø¹Ù†Ø§ØµØ± ÙƒÙ„Ù‡Ø§ Ù‡Ùˆ <b>Ù†Ø§ØªØ¬ Ø§Ù„Ø¶Ø±Ø¨</b>.
        </div>
      </div>

      <div class="mt-6 flex flex-wrap gap-2 justify-center">
        <button id="tab-learn" class="btn bg-pink-600 text-white">ØªØ¹Ù„Ù…</button>
        <button id="tab-examples" class="btn bg-white text-slate-700 border-2 border-pink-200">Ø£Ù…Ø«Ù„Ø©</button>
        <button id="tab-practice" class="btn bg-white text-slate-700 border-2 border-pink-200">ØªØ¯Ø±Ø¨</button>
      </div>
    </div>

    <div class="mt-6">
      <section id="section-learn" class="bg-white rounded-3xl card p-6 border border-emerald-100">
        <div class="grid md:grid-cols-3 gap-4">
          <div class="rounded-2xl p-4 bg-pink-50 border border-pink-100">
            <div class="font-extrabold text-lg text-slate-800 mb-2">Ù¡) Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ø´Ø¨ÙƒØ©ØŸ</div>
            <div class="text-slate-700 leading-7">Ø§Ù„Ø´Ø¨ÙƒØ© ØªØ±ØªÙŠØ¨ Ø¹Ù†Ø§ØµØ± ÙÙŠ <b>ØµÙÙˆÙ</b> Ùˆ<b>Ø£Ø¹Ù…Ø¯Ø©</b> Ù…ØªØ³Ø§ÙˆÙŠØ©.</div>
          </div>
          <div class="rounded-2xl p-4 bg-purple-50 border border-purple-100">
            <div class="font-extrabold text-lg text-slate-800 mb-2">Ù¢) Ø·Ø±ÙŠÙ‚ØªØ§Ù† Ù„Ø¥ÙŠØ¬Ø§Ø¯ Ø§Ù„Ù†Ø§ØªØ¬</div>
            <div class="text-slate-700 leading-7"><b>Ø£Ø¬Ù…Ø¹</b> ØµÙÙ‹Ø§ ØµÙÙ‹Ø§ØŒ Ø£Ùˆ <b>Ø£Ø¶Ø±Ø¨</b> (ØµÙÙˆÙ Ã— Ø£Ø¹Ù…Ø¯Ø©).</div>
          </div>
          <div class="rounded-2xl p-4 bg-amber-50 border border-amber-100">
            <div class="font-extrabold text-lg text-slate-800 mb-2">Ù£) Ø®Ø§ØµÙŠØ© Ø§Ù„Ø¥Ø¨Ø¯Ø§Ù„</div>
            <div class="text-slate-700 leading-7">Ø¥Ø°Ø§ Ø¨Ø¯Ù‘Ù„Ù†Ø§ Ø§Ù„Ø¹ÙˆØ§Ù…Ù„ Ù„Ø§ ÙŠØªØºÙŠØ± Ø§Ù„Ù†Ø§ØªØ¬: <span dir="ltr" class="font-extrabold text-amber-800">Ù£ Ã— Ù¥ = Ù¥ Ã— Ù£</span></div>
          </div>
        </div>

        <div class="mt-5 rounded-2xl p-4 border border-slate-200 bg-slate-50">
          <div class="font-extrabold text-slate-800 mb-2">ØªÙ„Ù…ÙŠØ­ âœ…</div>
          <div class="text-slate-700 leading-7">Ø§Ù„ØµÙÙˆÙ Ã— Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© = Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„ÙƒÙ„ÙŠ (Ù†Ø§ØªØ¬ Ø§Ù„Ø¶Ø±Ø¨).</div>
        </div>
      </section>

      <section id="section-examples" class="hidden bg-white rounded-3xl card p-6 border border-emerald-100">
        <div class="flex items-center justify-between flex-wrap gap-2 mb-4">
          <div class="font-extrabold text-xl text-slate-800">Ø£Ù…Ø«Ù„Ø© Ù…Ø­Ù„ÙˆÙ„Ø© Ø¨Ø§Ù„Ø´Ø¨ÙƒØ§Øª</div>
          <div class="text-sm text-slate-500">Ø§Ø¶ØºØ·ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø«Ø§Ù„ Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø´Ø±Ø­</div>
        </div>
        <div id="examplesList" class="grid md:grid-cols-2 gap-4"></div>
      </section>

      <section id="section-practice" class="hidden bg-white rounded-3xl card p-6 border border-emerald-100">
        <div class="flex flex-wrap items-center justify-between gap-3">
          <div>
            <div class="font-extrabold text-xl text-slate-800">ØªØ¯Ø±ÙŠØ¨: Ø§ÙƒØªØ¨ÙŠ Ø¬Ù…Ù„Ø© Ø§Ù„Ø¶Ø±Ø¨ Ù…Ù† Ø§Ù„Ø´Ø¨ÙƒØ©</div>
            <div class="text-slate-600">Ø§ÙƒØªØ¨ÙŠ: <b>Ø§Ù„Ù†Ø§ØªØ¬ = Ø§Ù„ØµÙÙˆÙ Ã— Ø§Ù„Ø£Ø¹Ù…Ø¯Ø©</b> (ÙˆÙŠÙ…ÙƒÙ† ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø¹ÙˆØ§Ù…Ù„).</div>
          </div>
          <div class="rounded-2xl bg-slate-50 border border-slate-200 px-4 py-3">
            <div class="font-bold text-slate-700">Ø§Ù„Ù†ØªÙŠØ¬Ø©</div>
            <div class="text-slate-700">â­ <span id="score">Ù </span> / <span id="total">Ù </span></div>
          </div>
        </div>

        <div class="mt-4 flex flex-wrap gap-3 items-center justify-center">
          <label class="font-bold text-slate-700">Ø§Ù„ØµÙÙˆÙ:</label>
          <input id="rows" type="range" min="1" max="8" value="3" class="w-48"/>
          <span id="rowsVal" class="pill bg-white border border-slate-200 text-slate-700">Ù£</span>

          <label class="font-bold text-slate-700">Ø§Ù„Ø£Ø¹Ù…Ø¯Ø©:</label>
          <input id="cols" type="range" min="1" max="8" value="5" class="w-48"/>
          <span id="colsVal" class="pill bg-white border border-slate-200 text-slate-700">Ù¥</span>

          <button id="btnNew" class="btn bg-purple-600 text-white">Ø¹Ø´ÙˆØ§Ø¦ÙŠ</button>
          <button id="btnShow" class="btn bg-white border-2 border-purple-200 text-slate-700">Ø£Ø¸Ù‡Ø± Ø§Ù„Ø´Ø±Ø­</button>
        </div>

        <div class="mt-6 grid lg:grid-cols-2 gap-6 items-start">
          <div class="rounded-3xl border border-pink-100 bg-gradient-to-b from-white to-pink-50 p-5">
            <div class="flex items-center justify-between mb-3">
              <div class="font-extrabold text-slate-800">Ø§Ù„Ø´Ø¨ÙƒØ©</div>
              <div class="pill bg-white border border-pink-200 text-slate-700" id="badge">â€”</div>
            </div>

            <div class="flex justify-center">
              <div id="grid" class="gridWrap"></div>
            </div>

            <div class="mt-5 rounded-2xl bg-white border border-slate-200 p-4">
              <div class="font-extrabold text-slate-800 text-center mb-2">Ø§ÙƒØªØ¨ÙŠ Ø¬Ù…Ù„Ø© Ø§Ù„Ø¶Ø±Ø¨:</div>

              <!-- RTL: Ø§Ù„Ù†Ø§ØªØ¬ ÙŠØ³Ø§Ø±ØŒ Ø§Ù„Ø¹Ù…Ù„ÙŠØ© ÙŠÙ…ÙŠÙ† -->
              <div class="flex flex-wrap items-center justify-center gap-3" dir="rtl">
                <input id="inP" class="numInput border-pink-500 text-slate-800" inputmode="numeric" maxlength="3" placeholder="ØŸ" />
                <div class="eqBox border-slate-200 text-slate-600" dir="ltr">=</div>
                <input id="inR" class="numInput border-pink-500 text-slate-800" inputmode="numeric" maxlength="2" placeholder="ØŸ" />
                <div class="eqBox border-slate-200 text-slate-600" dir="ltr">Ã—</div>
                <input id="inC" class="numInput border-pink-500 text-slate-800" inputmode="numeric" maxlength="2" placeholder="ØŸ" />
              </div>

              <div class="mt-3 text-center text-sm text-slate-500">
                Ø§ÙƒØªØ¨ÙŠÙ‡Ø§: <span dir="ltr" class="font-extrabold text-purple-700">Ø§Ù„Ù†Ø§ØªØ¬ = Ø§Ù„ØµÙÙˆÙ Ã— Ø§Ù„Ø£Ø¹Ù…Ø¯Ø©</span>
              </div>

              <div class="mt-4 flex gap-3 justify-center">
                <button id="btnCheck" class="btn bg-emerald-600 text-white w-44">ØªØ­Ù‚Ù‚ âœ…</button>
                <button id="btnHint" class="btn bg-white border-2 border-purple-200 text-slate-700 w-44">ØªÙ„Ù…ÙŠØ­ ğŸ’¡</button>
              </div>
            </div>
          </div>

          <div class="rounded-3xl border border-slate-200 bg-white p-5">
            <div class="font-extrabold text-slate-800 mb-2">Ø§Ù„ØªØºØ°ÙŠØ© Ø§Ù„Ø±Ø§Ø¬Ø¹Ø© ÙˆØ§Ù„Ø´Ø±Ø­</div>
            <div id="feedback" class="text-slate-700 leading-7">Ø§ÙƒØªØ¨ÙŠ Ø§Ù„Ù†Ø§ØªØ¬ ÙˆØ§Ù„ØµÙÙˆÙ ÙˆØ§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø«Ù… Ø§Ø¶ØºØ·ÙŠ <b>ØªØ­Ù‚Ù‚</b>.</div>
          </div>
        </div>
      </section>
    </div>

    <div class="mt-8 text-center text-slate-600">
      <div class="bg-white/80 inline-block px-4 py-3 rounded-2xl border border-slate-200">
        <span class="font-bold">Ø£/ ÙØ§Ø·Ù…Ø© Ù‡Ø²Ø§Ø²ÙŠ</span> â€¢ Ù…Ù„ØªÙ‚Ù‰ Ù…Ø¹Ù„Ù…ÙŠ ÙˆÙ…Ø¹Ù„Ù…Ø§Øª Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª â€¢ Ø§Ù„Ù…Ù„ØªÙ‚Ù‰ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ
      </div>
    </div>
  </div>

  <script>
    const ar=['Ù ','Ù¡','Ù¢','Ù£','Ù¤','Ù¥','Ù¦','Ù§','Ù¨','Ù©'];
    const toArabic=(n)=>String(Math.trunc(n)).split('').map(ch=>{if(ch==='-')return 'âˆ’';const d=ch.charCodeAt(0)-48;return (d>=0&&d<=9)?ar[d]:ch;}).join('');
    const normDigits=(str)=>{if(str==null)return "";const map={'Ù ':'0','Ù¡':'1','Ù¢':'2','Ù£':'3','Ù¤':'4','Ù¥':'5','Ù¦':'6','Ù§':'7','Ù¨':'8','Ù©':'9','Û°':'0','Û±':'1','Û²':'2','Û³':'3','Û´':'4','Ûµ':'5','Û¶':'6','Û·':'7','Û¸':'8','Û¹':'9'};return String(str).trim().split('').map(ch=>map[ch]??ch).join('');};
    const randInt=(min,max)=>Math.floor(Math.random()*(max-min+1))+min;

    const tabs=[{btn:'tab-learn',sec:'section-learn'},{btn:'tab-examples',sec:'section-examples'},{btn:'tab-practice',sec:'section-practice'}];
    function setTab(activeBtnId){
      tabs.forEach(t=>{
        const b=document.getElementById(t.btn), s=document.getElementById(t.sec);
        const active=t.btn===activeBtnId;
        s.classList.toggle('hidden',!active);
        b.className=active?'btn bg-pink-600 text-white':'btn bg-white text-slate-700 border-2 border-pink-200';
      });
    }
    document.getElementById('tab-learn').onclick=()=>setTab('tab-learn');
    document.getElementById('tab-examples').onclick=()=>setTab('tab-examples');
    document.getElementById('tab-practice').onclick=()=>setTab('tab-practice');

    const examples=[{r:3,c:5},{r:2,c:4},{r:4,c:3},{r:5,c:1}];
    function miniGrid(r,c){
      const style=`grid-template-columns: repeat(${c}, 18px);`;
      let dots=''; for(let i=0;i<r*c;i++) dots+=`<div class="miniDot"></div>`;
      return `<div class="miniGrid" style="${style}">${dots}</div>`;
    }
    function exCard(r,c,idx){
      const p=r*c;
      const add=Array.from({length:r},()=>toArabic(c)).join(' + ');
      return `
        <div class="rounded-3xl border border-slate-200 bg-slate-50 p-5 cursor-pointer hover:shadow-lg transition" data-idx="${idx}">
          <div class="font-extrabold text-slate-800 mb-2">Ù…Ø«Ø§Ù„ ${toArabic(idx+1)}</div>
          <div class="text-slate-700">Ø´Ø¨ÙƒØ© ÙÙŠÙ‡Ø§ ${toArabic(r)} ØµÙÙˆÙ Ùˆ${toArabic(c)} Ø£Ø¹Ù…Ø¯Ø©.</div>
          <div class="mt-3 flex justify-center">${miniGrid(r,c)}</div>

          <div id="ex-body-${idx}" class="hidden mt-4 rounded-2xl bg-white border border-slate-200 p-4 text-slate-700 leading-7">
            <div class="font-extrabold text-slate-800 mb-2">Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© (Ù¡): Ø£Ø¬Ù…Ø¹</div>
            <div dir="ltr" class="font-bold">${add} = ${toArabic(p)}</div>
            <div class="mt-3 font-extrabold text-slate-800 mb-2">Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© (Ù¢): Ø£Ø¶Ø±Ø¨</div>
            <div dir="ltr" class="font-extrabold text-purple-700">${toArabic(r)} Ã— ${toArabic(c)} = ${toArabic(p)}</div>
            <div class="mt-3 font-extrabold text-slate-800 mb-1">Ø®Ø§ØµÙŠØ© Ø§Ù„Ø¥Ø¨Ø¯Ø§Ù„</div>
            <div dir="ltr" class="font-bold text-amber-800">${toArabic(c)} Ã— ${toArabic(r)} = ${toArabic(p)}</div>
          </div>
          <div class="mt-3 text-sm text-pink-600 font-bold">Ø§Ø¶ØºØ·ÙŠ Ù„Ø¹Ø±Ø¶/Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø­Ù„</div>
        </div>`;
    }
    function renderExamples(){
      const container=document.getElementById('examplesList');
      container.innerHTML=examples.map((x,i)=>exCard(x.r,x.c,i)).join('');
      container.querySelectorAll('[data-idx]').forEach(el=>{
        el.addEventListener('click',()=>{
          const idx=el.getAttribute('data-idx');
          document.getElementById(`ex-body-${idx}`).classList.toggle('hidden');
        });
      });
    }
    renderExamples();

    let state={r:3,c:5,score:0,total:0,locked:false};
    const scoreEl=document.getElementById('score');
    const totalEl=document.getElementById('total');
    const feedbackEl=document.getElementById('feedback');

    function animateFeedback(kind){
      feedbackEl.classList.remove('shake','pop'); void feedbackEl.offsetWidth;
      feedbackEl.classList.add(kind==='good'?'pop':'shake');
    }
    function setFeedback(html,kind){feedbackEl.innerHTML=html; animateFeedback(kind);}

    function drawGrid(r,c){
      const grid=document.getElementById('grid');
      grid.style.gridTemplateColumns=`repeat(${c}, 34px)`;
      grid.innerHTML='';
      for(let i=0;i<r*c;i++){const d=document.createElement('div'); d.className='dot'; grid.appendChild(d);}
      document.getElementById('badge').textContent=`${toArabic(r)} ØµÙÙˆÙ â€¢ ${toArabic(c)} Ø£Ø¹Ù…Ø¯Ø©`;
    }
    function clearInputs(){['inP','inR','inC'].forEach(id=>document.getElementById(id).value='');}
    function renderPractice(){
      drawGrid(state.r,state.c);
      document.getElementById('rowsVal').textContent=toArabic(state.r);
      document.getElementById('colsVal').textContent=toArabic(state.c);
      setFeedback('Ø§ÙƒØªØ¨ÙŠ: <b>Ø§Ù„Ù†Ø§ØªØ¬ = Ø§Ù„ØµÙÙˆÙ Ã— Ø§Ù„Ø£Ø¹Ù…Ø¯Ø©</b> (ÙŠÙ…ÙƒÙ† Ø£ÙŠØ¶Ù‹Ø§ ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø¹ÙˆØ§Ù…Ù„).','good');
      clearInputs(); state.locked=false;
    }
    function readNumber(id){
      const raw=normDigits(document.getElementById(id).value).replace(/\D/g,'');
      return raw===''?null:parseInt(raw,10);
    }
    function check(){
      if(state.locked) return;
      const pIn=readNumber('inP'), rIn=readNumber('inR'), cIn=readNumber('inC');
      if(pIn===null||rIn===null||cIn===null){setFeedback('âš ï¸ Ø§ÙƒØªØ¨ÙŠ Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø«Ù„Ø§Ø«Ø© (Ø§Ù„Ù†Ø§ØªØ¬ØŒ Ø§Ù„ØµÙÙˆÙØŒ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø©).','bad');return;}
      const r=state.r,c=state.c,p=r*c;
      state.total+=1;
      const okFactors=((rIn===r&&cIn===c)||(rIn===c&&cIn===r));
      const correct=okFactors&&(pIn===p);
      if(correct) state.score+=1;
      scoreEl.textContent=toArabic(state.score);
      totalEl.textContent=toArabic(state.total);
      state.locked=true;
      if(correct){
        setFeedback(`<div class="font-extrabold text-emerald-700 text-lg">Ø£Ø­Ø³Ù†ØªÙ! âœ…</div>
        <div class="mt-2"><b>Ø§Ù„Ù†Ø§ØªØ¬:</b> ${toArabic(p)}</div>
        <div class="mt-2"><b>Ø¬Ù…Ù„Ø© Ø§Ù„Ø¶Ø±Ø¨:</b> <span dir="ltr" class="font-extrabold text-purple-700">${toArabic(r)} Ã— ${toArabic(c)} = ${toArabic(p)}</span></div>
        <div class="mt-2"><b>Ø§Ù„Ø¥Ø¨Ø¯Ø§Ù„:</b> <span dir="ltr" class="font-bold text-amber-800">${toArabic(c)} Ã— ${toArabic(r)} = ${toArabic(p)}</span></div>`,'good');
      } else {
        setFeedback(`<div class="font-extrabold text-rose-700 text-lg">Ø­Ø§ÙˆÙ„ÙŠ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ ğŸ’¡</div>
        <div class="mt-2"><b>Ø§Ù„ØµØ­ÙŠØ­:</b> <span dir="ltr" class="font-extrabold text-purple-700">${toArabic(r)} Ã— ${toArabic(c)} = ${toArabic(p)}</span></div>
        <div class="mt-2">ØªØ°ÙƒØ±ÙŠ: Ø§Ù„ØµÙÙˆÙ Ã— Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© = Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„ÙƒÙ„ÙŠ.</div>`,'bad');
      }
    }
    function hint(){
      const r=state.r,c=state.c;
      setFeedback(`<div class="font-extrabold text-slate-800">ØªÙ„Ù…ÙŠØ­ ğŸ’¡</div>
      <div class="mt-1">Ø¹Ø¯Ø¯ÙŠ <b>Ø§Ù„ØµÙÙˆÙ</b> = <b>${toArabic(r)}</b></div>
      <div>Ø¹Ø¯Ø¯ÙŠ <b>Ø§Ù„Ø£Ø¹Ù…Ø¯Ø©</b> = <b>${toArabic(c)}</b></div>
      <div class="mt-2">Ø«Ù…: <span dir="ltr" class="font-extrabold text-purple-700">${toArabic(r)} Ã— ${toArabic(c)}</span></div>`,'good');
    }
    function showExplain(){
      const r=state.r,c=state.c,p=r*c;
      const add=Array.from({length:r},()=>toArabic(c)).join(' + ');
      setFeedback(`<div class="font-extrabold text-slate-800 mb-2">Ø§Ù„Ø´Ø±Ø­ âœ…</div>
      <div><b>Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© (Ù¡): Ø£Ø¬Ù…Ø¹</b></div>
      <div dir="ltr" class="font-bold">${add} = ${toArabic(p)}</div>
      <div class="mt-3"><b>Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© (Ù¢): Ø£Ø¶Ø±Ø¨</b></div>
      <div dir="ltr" class="font-extrabold text-purple-700">${toArabic(r)} Ã— ${toArabic(c)} = ${toArabic(p)}</div>
      <div class="mt-3"><b>Ø®Ø§ØµÙŠØ© Ø§Ù„Ø¥Ø¨Ø¯Ø§Ù„</b></div>
      <div dir="ltr" class="font-bold text-amber-800">${toArabic(c)} Ã— ${toArabic(r)} = ${toArabic(p)}</div>`,'good');
    }

    const rowsSlider=document.getElementById('rows');
    const colsSlider=document.getElementById('cols');
    rowsSlider.addEventListener('input',()=>{state.r=parseInt(rowsSlider.value,10);renderPractice();});
    colsSlider.addEventListener('input',()=>{state.c=parseInt(colsSlider.value,10);renderPractice();});
    document.getElementById('btnNew').onclick=()=>{
      state.r=randInt(1,8); state.c=randInt(1,8);
      rowsSlider.value=state.r; colsSlider.value=state.c;
      renderPractice();
    };
    document.getElementById('btnCheck').onclick=check;
    document.getElementById('btnHint').onclick=hint;
    document.getElementById('btnShow').onclick=showExplain;

    ['inP','inR','inC'].forEach(id=>{
      const el=document.getElementById(id);
      el.addEventListener('input',()=>{
        const raw=normDigits(el.value).replace(/\D/g,'');
        const maxLen=(id==='inP')?3:2;
        el.value=raw.slice(0,maxLen);
      });
      el.addEventListener('keydown',(e)=>{if(e.key==='Enter') check();});
    });

    scoreEl.textContent=toArabic(0);
    totalEl.textContent=toArabic(0);
    renderPractice();
    setTab('tab-learn');
  </script>
</body>
</html>
